<project name="stellar-test" basedir="."
         xmlns:stellar="antlib:org.pageseeder.stellar.ant"
         default="test">

  <!--
   Process the whale document with the default settings
  -->
  <target name="test-whales-default">
    <stellar:export-pdf src="src/psml/whales.psml"
                        dest="out/ant_whales_default.pdf" />
  </target>

  <!--
   Process the whale document with the custom styles
  -->
  <target name="test-whales-styled">
    <stellar:export-pdf src="src/psml/whales.psml"
                        dest="out/ant_whales_styled.pdf"
                        stylesheet="src/css/whale.css"
                        fontsDir="src/fonts" />
  </target>

  <target name="test-basic-default">
    <stellar:export-pdf src="src/psml/basic.psml"
                        dest="out/ant_basic_default.pdf" />
  </target>

  <target name="test-basic-styled">
    <stellar:export-pdf src="src/psml/basic.psml"
                        dest="out/ant_basic_styled.pdf"
                        stylesheet="src/css/basic.css"
                        fontsDir="src/fonts">
      <title-page />
    </stellar:export-pdf>
  </target>

  <target name="test-turtles-default">
    <stellar:export-pdf src="src/psml/turtles.psml"
                        dest="out/ant_turtles_default.pdf" />
  </target>

  <target name="test-turtles-styled">
    <stellar:export-pdf src="src/psml/turtles.psml"
                        dest="out/ant_turtles_styled.pdf"
                        stylesheet="src/css/turtles.css"
                        fontsDir="src/fonts">
      <title-page>
        <item name="subtitle" xpath="//property[@name='subtitle']/@value"/>
        <item name="authors" xpath="concat(//property[@name='authors']/value[1], ' &amp; ' ,//property[@name='authors']/value[2])" />
      </title-page>
    </stellar:export-pdf>
  </target>

  <!--
   Process the policy document with the default settings
  -->
  <target name="test-policy-default">
    <stellar:export-pdf src="src/psml/policy.psml"
                        dest="out/ant_policy_default.pdf" />
  </target>

  <!--
   Process the policy document with the custom styles
  -->
  <target name="test-policy-styled">
    <stellar:export-pdf src="src/psml/policy.psml"
                        dest="out/ant_policy_styled.pdf"
                        stylesheet="src/css/policy.css"
                        fontsDir="src/fonts">
      <title-page>
        <item name="revised_date" xpath="(//property[@name='revised_date'])[1]/@value" format="d MMMM YYYY" />
      </title-page>
    </stellar:export-pdf>
  </target>

  <target name="test-policy-processed-default">
    <stellar:export-pdf src="src/psml/policy-processed.psml"
                        dest="out/ant_policy-processed_default.pdf" />
  </target>

  <target name="test-policy-processed-styled">
    <stellar:export-pdf src="src/psml/policy-processed.psml"
                        dest="out/ant_policy-processed_styled.pdf"
                        stylesheet="src/css/policy.css"
                        fontsDir="src/fonts">
      <title-page>
        <item name="revised_date" xpath="(//property[@name='revised_date'])[1]/@value" format="d MMMM YYYY" />
      </title-page>
    </stellar:export-pdf>
  </target>

  <target name="test-useless-default">
    <stellar:export-pdf src="src/psml/useless.psml"
                        dest="out/ant_useless_default.pdf" />
  </target>

  <target name="test-useless-styled">
    <stellar:export-pdf src="src/psml/useless.psml"
                        dest="out/ant_useless_styled.pdf"
                        stylesheet="src/css/useless.css"
                        fontsDir="src/fonts">
      <title-page>
        <item name="date" xpath="current-date()" format="d MMMM yyyy"/>
      </title-page>
    </stellar:export-pdf>
  </target>

</project>